apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: alertmanager
spec:
  interval: 30
  alertmanager:
    - host: alertmanager.canary.lab.flanksource.com
      name: alertmanager-check
      alerts:
        - .*
      ignore:
        - KubeScheduler.*
      transform:
        javascript: |
          JSON.stringify([{name: results.name, icon: 'alert', message: results.message, description: ''}]);
      test:
        template: "true"
